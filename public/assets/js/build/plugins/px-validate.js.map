{"version":3,"sources":["plugins/px-validate.js"],"names":["PxValidate","$","fn","validate","Error","NAME","DATA_KEY","JQUERY_NO_CONFLICT","ClassName","FORM_HELP","HAS_ERROR","ERROR","CONTAINER","NO_ARROW","Default","errorElement","errorClass","CONTAINER_REGEX","RegExp","PxValidator","element","config","validator","_getConfig","destroy","removeData","control","pxUtil","addClass","parents","removeClass","$error","$element","$container","_getParentContainer","length","find","remove","elementType","getAttribute","toLowerCase","$helpBlock","first","insertBefore","append","parent","parentNode","nodeName","toUpperCase","console","error","test","className","extend","constructor","highlight","_highlight","unhighlight","_unhighlight","errorPlacement","proxy","_errorPlacement","data","result","$el","each","_config","_jQueryInterface","Constructor","noConflict","jQuery"],"mappings":"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","file":"plugins/px-validate.js","sourcesContent":["\n\n\n\n// Plugins / PxValidate\n// --------------------------------------------------\n\nconst PxValidate = (function($) {\n  'use strict';\n\n  if (!$.fn.validate) {\n    throw new Error('jquery.validate.js required.');\n  }\n\n  /**\n   * ------------------------------------------------------------------------\n   * Constants\n   * ------------------------------------------------------------------------\n   */\n\n  const NAME               = 'pxValidate';\n  const DATA_KEY           = 'px.validate';\n  const JQUERY_NO_CONFLICT = $.fn[NAME];\n\n  const ClassName = {\n    FORM_HELP: 'form-help-text',\n    HAS_ERROR: 'has-validation-error',\n    ERROR:     'validation-error',\n    CONTAINER: 'validation-container',\n    NO_ARROW:  'validation-error-no-arrow',\n  };\n\n  const Default = {\n    errorElement: 'div',\n    errorClass:   `form-message ${ClassName.ERROR}`,\n  };\n\n  const CONTAINER_REGEX = new RegExp(`(^|\\\\s)(?:${ClassName.CONTAINER}|form-group|col-(?:xs|sm|md|lg)-\\\\d+)(\\\\s|$)`);\n\n  /**\n   * ------------------------------------------------------------------------\n   * Class Definition\n   * ------------------------------------------------------------------------\n   */\n\n  class PxValidator {\n    constructor(element, config) {\n      this.element = element;\n\n      this.validator = $(element).validate(\n        this._getConfig(element, config)\n      );\n    }\n\n    // getters\n\n    static get Default() {\n      return Default;\n    }\n\n    static get NAME() {\n      return NAME;\n    }\n\n    static get DATA_KEY() {\n      return DATA_KEY;\n    }\n\n    // public\n\n    getValidator() {\n      return this.validator;\n    }\n\n    destroy() {\n      this.validator.destroy();\n      $(this.element).removeData(DATA_KEY);\n    }\n\n    // private\n\n    _highlight(control) {\n      pxUtil.addClass(\n        $(control).parents('.form-group')[0],\n        `has-error ${ClassName.HAS_ERROR}`\n      );\n    }\n\n    _unhighlight(control) {\n      pxUtil.removeClass(\n        $(control).parents('.form-group')[0],\n        `has-error ${ClassName.HAS_ERROR}`\n      );\n    }\n\n    _errorPlacement($error, $element) {\n      const $container  = $(this._getParentContainer($element[0]));\n\n      if (!$container.length) { return; }\n\n      // Remove an old error\n      $container\n        .find(`.${ClassName.ERROR}`)\n        .remove();\n\n      // Check if the element is a checkbox or radio\n      //\n\n      let elementType = $element[0].getAttribute('type');\n\n      // Normalize type to avoid bugs\n      elementType = elementType ? elementType.toLowerCase() : null;\n\n      if (elementType === 'checkbox' || elementType === 'radio') {\n        pxUtil.addClass($error[0], ClassName.NO_ARROW);\n      }\n\n      // Append error\n      //\n\n      const $helpBlock = $container.find(`.${ClassName.FORM_HELP}`).first();\n\n      if ($helpBlock.length) {\n        $error.insertBefore($helpBlock);\n      } else {\n        $container.append($error);\n      }\n    }\n\n    _getParentContainer(element) {\n      const parent   = element.parentNode;\n      const nodeName = parent.nodeName.toUpperCase();\n\n      if (nodeName === 'FORM' || nodeName === 'BODY') {\n        console.error(new Error('Cannot find parent container.'));\n\n        return null;\n      }\n\n      return CONTAINER_REGEX.test(parent.className) ?\n         parent :\n         this._getParentContainer(parent);\n    }\n\n    _getConfig(element, config) {\n      return $.extend({},\n        this.constructor.Default,\n        {\n          highlight:      this._highlight,\n          unhighlight:    this._unhighlight,\n          errorPlacement: $.proxy(this._errorPlacement, this),\n        },\n        $(element).data(),\n        config\n      );\n    }\n\n    // static\n\n    static _jQueryInterface(config) {\n      let result;\n\n      const $el = this.each(function() {\n        let data      = $(this).data(DATA_KEY);\n        const _config = typeof config === 'object' ? config : null;\n\n        if (!data) {\n          data = new PxValidator(this, _config);\n          $(this).data(DATA_KEY, data);\n        }\n\n        if (typeof config === 'string') {\n          if (!data[config]) {\n            throw new Error(`No method named \"${config}\".`);\n          }\n          result = data[config]();\n        }\n      });\n\n      return typeof result !== 'undefined' ? result : $el;\n    }\n  }\n\n  /**\n   * ------------------------------------------------------------------------\n   * jQuery\n   * ------------------------------------------------------------------------\n   */\n\n  $.fn[NAME]             = PxValidator._jQueryInterface;\n  $.fn[NAME].Constructor = PxValidator;\n  $.fn[NAME].noConflict  = function() {\n    $.fn[NAME] = JQUERY_NO_CONFLICT;\n    return PxValidator._jQueryInterface;\n  };\n\n  return PxValidator;\n})(jQuery);\n\n\n"],"sourceRoot":"../src/"}