{"version":3,"sources":["plugins/px-responsive-bg.js"],"names":["PxResponsiveBg","$","NAME","DATA_KEY","EVENT_KEY","JQUERY_NO_CONFLICT","fn","Default","backgroundImage","overlay","overlayOpacity","ClassName","CONTAINER","IMAGE","OVERLAY","Event","RESIZE","ResponsiveBg","element","config","uniqueId","pxUtil","generateUniqueId","_getConfig","_loadImage","img","_sizeRatio","height","width","_setupMarkup","_setListeners","update","parentEl","image","parentNode","parentHeight","parentWidth","top","left","Math","ceil","floor","style","clearMarkup","_unsetListeners","removeClass","find","remove","removeData","path","cb","Image","onload","src","addClass","$imageContainer","length","appendTo","append","Error","attr","prepend","css","background","opacity","window","on","constructor","proxy","off","result","extend","data","args","each","_config","_jQueryInterface","Constructor","noConflict","jQuery"],"mappings":"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","file":"plugins/px-responsive-bg.js","sourcesContent":["\n\n\n// Plugins / PxResponsiveBg\n// --------------------------------------------------\n\nconst PxResponsiveBg = (function($) {\n  'use strict';\n\n  /**\n   * ------------------------------------------------------------------------\n   * Constants\n   * ------------------------------------------------------------------------\n   */\n\n  const NAME               = 'pxResponsiveBg';\n  const DATA_KEY           = 'px.responsiveBg';\n  const EVENT_KEY          = `.${DATA_KEY}`;\n  const JQUERY_NO_CONFLICT = $.fn[NAME];\n\n\n  const Default = {\n    backgroundImage: null,\n    overlay:         false,\n    overlayOpacity:  0.2,\n  };\n\n  const ClassName = {\n    CONTAINER: 'px-responsive-bg-container',\n    IMAGE:     'px-responsive-bg',\n    OVERLAY:   'px-responsive-bg-overlay',\n  };\n\n  const Event = {\n    RESIZE: `resize${EVENT_KEY}`,\n  };\n\n\n  /**\n   * ------------------------------------------------------------------------\n   * Class Definition\n   * ------------------------------------------------------------------------\n   */\n\n  class ResponsiveBg {\n    constructor(element, config) {\n      this.uniqueId = pxUtil.generateUniqueId();\n\n      this.element = element;\n      this.config  = this._getConfig(config);\n\n      this._loadImage(this.config.backgroundImage, (img) => {\n        this._sizeRatio = img.height / img.width;\n\n        this._setupMarkup(img);\n        this._setListeners();\n\n        this.update();\n      });\n    }\n\n\n    // getters\n\n    static get Default() {\n      return Default;\n    }\n\n    static get NAME() {\n      return NAME;\n    }\n\n    static get DATA_KEY() {\n      return DATA_KEY;\n    }\n\n    static get Event() {\n      return Event;\n    }\n\n    static get EVENT_KEY() {\n      return EVENT_KEY;\n    }\n\n\n    // public\n\n    update() {\n      const parentEl     = this.image.parentNode;\n      const parentHeight = $(parentEl).height();\n      const parentWidth  = $(parentEl).width();\n\n      let height;\n      let width;\n      let top;\n      let left;\n\n      if (parentWidth * this._sizeRatio > parentHeight) {\n        width  = '100%';\n        height = Math.ceil(parentWidth * this._sizeRatio);\n        top    = Math.floor(-1 * (height - parentHeight) / 2);\n        left   = 0;\n      } else {\n        width  = Math.ceil(parentHeight / this._sizeRatio);\n        height = parentHeight;\n        top    = 0;\n        left   = Math.floor(-1 * (width - parentWidth) / 2);\n      }\n\n      this.image.style.width  = width === '100%' ? width : `${width}px`;\n      this.image.style.height = `${height}px`;\n      this.image.style.top    = `${top}px`;\n      this.image.style.left   = `${left}px`;\n    }\n\n    destroy(clearMarkup) {\n      this._unsetListeners();\n\n      if (clearMarkup) {\n        $(this.element)\n          .removeClass(ClassName.CONTAINER)\n          .find(`> .${ClassName.IMAGE}`).remove();\n      }\n\n      $(this.element).removeData(DATA_KEY);\n    }\n\n\n    // private\n\n    _loadImage(path, cb) {\n      const img  = new Image();\n\n      img.onload = () => cb(img);\n      img.src    = path;\n    }\n\n    _setupMarkup(img) {\n      pxUtil.addClass(this.element, ClassName.CONTAINER);\n\n      let $imageContainer = $(this.element).find(`> .${ClassName.IMAGE}`);\n\n      if (!$imageContainer.length) {\n        $imageContainer = $(`<div class=\"${ClassName.IMAGE}\"></div>`).appendTo(this.element);\n        $imageContainer.append('<img alt=\"\">');\n      }\n\n      this.image = $imageContainer.find('> img')[0];\n\n      if (!this.image) {\n        throw new Error('Background <img> element not found!');\n      }\n\n      $(this.image).attr('src', img.src);\n\n      if (this.config.overlay !== false) {\n        $imageContainer.find(`.${ClassName.OVERLAY}`).remove();\n\n        $imageContainer.prepend(\n          $(`<div class=\"${ClassName.OVERLAY}\"></div>`)\n            .css({\n              background: typeof this.config.overlay === 'boolean' ? '#000' : this.config.overlay,\n              opacity:    this.config.overlayOpacity,\n            })\n        );\n      } else {\n        $imageContainer.find(`> .${ClassName.OVERLAY}`).remove();\n      }\n    }\n\n    _setListeners() {\n      $(window).on(`${this.constructor.Event.RESIZE}.${this.uniqueId}`, $.proxy(this.update, this));\n    }\n\n    _unsetListeners() {\n      $(window).off(`${this.constructor.Event.RESIZE}.${this.uniqueId}`);\n    }\n\n    _getConfig(config) {\n      const result = $.extend({},\n        this.constructor.Default,\n        $(this.element).data(),\n        config\n      );\n\n      if (!result.backgroundImage) {\n        throw new Error('Background image is not specified.');\n      }\n\n      return result;\n    }\n\n\n    // static\n\n    static _jQueryInterface(config, ...args) {\n      return this.each(function() {\n        let data    = $(this).data(DATA_KEY);\n        let _config = typeof config === 'object' ? config : null;\n\n        if (!data) {\n          data = new ResponsiveBg(this, _config);\n          $(this).data(DATA_KEY, data);\n        }\n\n        if (typeof config === 'string') {\n          if (!data[config]) {\n            throw new Error(`No method named \"${config}\"`);\n          }\n          data[config](...args);\n        }\n      });\n    }\n\n  }\n\n\n  /**\n   * ------------------------------------------------------------------------\n   * jQuery\n   * ------------------------------------------------------------------------\n   */\n\n  $.fn[NAME]             = ResponsiveBg._jQueryInterface;\n  $.fn[NAME].Constructor = ResponsiveBg;\n  $.fn[NAME].noConflict  = function() {\n    $.fn[NAME] = JQUERY_NO_CONFLICT;\n    return ResponsiveBg._jQueryInterface;\n  };\n\n  return ResponsiveBg;\n})(jQuery);\n\n\n"],"sourceRoot":"../src/"}