{"version":3,"sources":["plugins/px-navbar.js"],"names":["PxNavbar","$","NAME","DATA_KEY","EVENT_KEY","DATA_API_KEY","JQUERY_NO_CONFLICT","fn","ClassName","NAVBAR","INNER","IN","COLLAPSED","Selector","DATA_TOGGLE","DROPDOWN_TOGGLE","COLLAPSE","DROPDOWN","Event","CLICK_DATA_API","RESIZE","CLICK","MOUSEDOWN","COLLAPSE_SHOW","COLLAPSE_SHOWN","COLLAPSE_HIDDEN","DROPDOWN_SHOWN","DROPDOWN_HIDDEN","Navbar","element","perfectScrollbar","Error","uniqueId","pxUtil","generateUniqueId","$collapse","find","$toggle","_scrollbarEnabled","_curScrollTop","length","$inner","_setupInnerContainer","_setListeners","_updateHeight","scrollTop","_unsetListeners","_disableScrollbar","append","remove","removeData","maxHeight","window","height","offsetTop","curHeight","suppressScrollX","self","on","constructor","is","updateScrollbar","removeClass","addClass","attr","_enableScrollbar","e","getAttribute","preventDefault","stopPropagation","removeAttribute","click","setAttribute","off","method","args","each","data","support","transition","apply","document","$target","parents","_jQueryInterface","call","Constructor","noConflict","jQuery"],"mappings":"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","file":"plugins/px-navbar.js","sourcesContent":["\n\n\n\n\n\n\n// Plugins / PxNavbar\n// --------------------------------------------------\n\nconst PxNavbar = (function($) {\n  'use strict';\n\n  /**\n   * ------------------------------------------------------------------------\n   * Constants\n   * ------------------------------------------------------------------------\n   */\n\n  const NAME               = 'pxNavbar';\n  const DATA_KEY           = 'px.navbar';\n  const EVENT_KEY          = `.${DATA_KEY}`;\n  const DATA_API_KEY       = '.data-api';\n  const JQUERY_NO_CONFLICT = $.fn[NAME];\n\n  const ClassName = {\n    NAVBAR:    'px-navbar',\n    INNER:     'px-navbar-collapse-inner',\n    IN:        'in',\n    COLLAPSED: 'collapsed',\n  };\n\n  const Selector = {\n    DATA_TOGGLE:     '.navbar-toggle[data-toggle=\"collapse\"]',\n    DROPDOWN_TOGGLE: '.dropdown-toggle[data-toggle=\"dropdown\"]',\n    COLLAPSE:        '.navbar-collapse',\n    DROPDOWN:        '.dropdown',\n  };\n\n  const Event = {\n    CLICK_DATA_API:  `click${EVENT_KEY}${DATA_API_KEY}`,\n    RESIZE:          `resize${EVENT_KEY}`,\n    CLICK:           `click${EVENT_KEY}`,\n    MOUSEDOWN:       `mousedown${EVENT_KEY}`,\n    COLLAPSE_SHOW:   `show.bs.collapse${EVENT_KEY}`,\n    COLLAPSE_SHOWN:  `shown.bs.collapse${EVENT_KEY}`,\n    COLLAPSE_HIDDEN: `hidden.bs.collapse${EVENT_KEY}`,\n    DROPDOWN_SHOWN:  `shown.bs.dropdown${EVENT_KEY}`,\n    DROPDOWN_HIDDEN: `hidden.bs.dropdown${EVENT_KEY}`,\n  };\n\n  /**\n   * ------------------------------------------------------------------------\n   * Class Definition\n   * ------------------------------------------------------------------------\n   */\n\n  class Navbar {\n    constructor(element) {\n      if (!$.fn.perfectScrollbar) {\n        throw new Error('Scrolling feature requires the \"perfect-scrollbar\" plugin included.');\n      }\n\n      this.uniqueId = pxUtil.generateUniqueId();\n\n      this.element   = element;\n      this.$collapse = $(element).find(Selector.COLLAPSE);\n      this.$toggle   = $(element).find(Selector.DATA_TOGGLE);\n\n      this._scrollbarEnabled = 0;\n      this._curScrollTop     = 0;\n\n      if (!this.$collapse.length || !this.$toggle.length) { return; }\n\n      this.$inner = this._setupInnerContainer();\n\n      this._setListeners();\n    }\n\n\n    // getters\n\n    static get NAME() {\n      return NAME;\n    }\n\n    static get DATA_KEY() {\n      return DATA_KEY;\n    }\n\n    static get Event() {\n      return Event;\n    }\n\n    static get EVENT_KEY() {\n      return EVENT_KEY;\n    }\n\n    // public\n\n    updateScrollbar() {\n      if (!this._scrollbarEnabled) { return; }\n\n      this._updateHeight();\n\n      this.$inner\n        .scrollTop(this._curScrollTop)\n        .perfectScrollbar('update');\n    }\n\n    destroy() {\n      this._unsetListeners();\n\n      this._disableScrollbar();\n\n      this.$collapse.append(this.$inner.find('> *'));\n\n      this.$inner.remove();\n\n      $(this.element).removeData(DATA_KEY);\n    }\n\n    // private\n\n    _updateHeight() {\n      const maxHeight = $(window).height() - this.$collapse[0].offsetTop;\n\n      this.$collapse.height('');\n\n      const curHeight = this.$collapse.height();\n\n      if (curHeight > maxHeight) {\n        this.$collapse.height(`${maxHeight}px`);\n      }\n    }\n\n    _enableScrollbar() {\n      if (this._scrollbarEnabled) { return; }\n\n      this._updateHeight();\n      this.$inner.perfectScrollbar({ suppressScrollX: true });\n\n      this._scrollbarEnabled = 1;\n    }\n\n    _disableScrollbar() {\n      if (!this._scrollbarEnabled) { return; }\n\n      this.$collapse.height('');\n      this.$inner.perfectScrollbar('destroy');\n\n      this._scrollbarEnabled = 0;\n    }\n\n    _setupInnerContainer() {\n      const $inner = $(`<div class=\"${ClassName.INNER}\"></div>`);\n\n      $inner.append(this.$collapse.find('> *'));\n\n      this.$collapse.append($inner);\n\n      return $inner;\n    }\n\n    _setListeners() {\n      const self = this;\n\n      $(window)\n        .on(`${this.constructor.Event.RESIZE}.${this.uniqueId}`, () => {\n          if (!this._scrollbarEnabled) { return; }\n\n          // TODO: Remove dependency on toggle button\n          if (this.$toggle.is(':visible')) {\n            this._curScrollTop = this.$inner[0].scrollTop;\n            this.updateScrollbar();\n          } else {\n            this._disableScrollbar();\n            this.$collapse.removeClass(ClassName.IN);\n            this.$toggle.addClass(ClassName.COLLAPSED);\n            this.$collapse.attr('aria-expanded', 'false');\n            this.$toggle.attr('aria-expanded', 'false');\n          }\n        });\n\n      $(this.element)\n        .on(this.constructor.Event.COLLAPSE_SHOW, Selector.COLLAPSE, () => {\n          this.$collapse.find('.dropdown.open').removeClass('open');\n        })\n        .on(this.constructor.Event.COLLAPSE_SHOWN, Selector.COLLAPSE, () => {\n          this._enableScrollbar();\n        })\n        .on(this.constructor.Event.COLLAPSE_HIDDEN, Selector.COLLAPSE, () => {\n          this._disableScrollbar();\n        })\n        .on(`${this.constructor.Event.DROPDOWN_SHOWN} ${this.constructor.Event.DROPDOWN_HIDDEN}`, Selector.DROPDOWN, () => {\n          this.updateScrollbar();\n        })\n        .on(this.constructor.Event.MOUSEDOWN, Selector.DROPDOWN_TOGGLE, () => {\n          if (!this._scrollbarEnabled) { return true; }\n\n          this._curScrollTop = this.$inner[0].scrollTop;\n        })\n        .on(this.constructor.Event.CLICK, Selector.DROPDOWN_TOGGLE, function(e) {\n          if (!self._scrollbarEnabled) { return true; }\n          if (this.getAttribute('href') === '#') { return true; }\n\n          // Prevent dropdown open\n          e.preventDefault();\n          e.stopPropagation();\n\n          // Simulate link click and prevent dropdown toggling\n          this.removeAttribute('data-toggle');\n          this.click();\n          this.setAttribute('data-toggle', 'dropdown');\n        });\n    }\n\n    _unsetListeners() {\n      $(window).off(`${this.constructor.Event.RESIZE}.${this.uniqueId}`);\n      $(this.element).off(EVENT_KEY);\n    }\n\n    // static\n\n    static _jQueryInterface(method, ...args) {\n      return this.each(function() {\n        let data = $(this).data(DATA_KEY);\n\n        if (!data) {\n          data = new Navbar(this);\n          $(this).data(DATA_KEY, data);\n\n          if (!$.support.transition && $(this).find(Selector.DATA_TOGGLE).attr('aria-expanded') === 'true') {\n            data._enableScrollbar();\n          }\n        }\n\n        if (typeof method === 'string') {\n          if (!data[method]) {\n            throw new Error(`No method named \"${method}\"`);\n          }\n          data[method].apply(data, args);\n        }\n      });\n    }\n  }\n\n\n  /**\n   * ------------------------------------------------------------------------\n   * Data Api implementation\n   * ------------------------------------------------------------------------\n   */\n\n  $(document).on(Event.CLICK_DATA_API, `.${ClassName.NAVBAR} ${Selector.DATA_TOGGLE}`, function(e) {\n    e.preventDefault();\n\n    const $target = $(this).parents(`.${ClassName.NAVBAR}`);\n\n    if (!$target.length) { return; }\n\n    if (!$target.data(DATA_KEY)) {\n      Navbar._jQueryInterface.call($target);\n    }\n  });\n\n\n  /**\n   * ------------------------------------------------------------------------\n   * jQuery\n   * ------------------------------------------------------------------------\n   */\n\n  $.fn[NAME]             = Navbar._jQueryInterface;\n  $.fn[NAME].Constructor = Navbar;\n  $.fn[NAME].noConflict  = function() {\n    $.fn[NAME] = JQUERY_NO_CONFLICT;\n    return Navbar._jQueryInterface;\n  };\n\n  return Navbar;\n})(jQuery);\n\n\n"],"sourceRoot":"../src/"}