{"version":3,"sources":["plugins/px-file.js"],"names":["PxFile","$","NAME","DATA_KEY","EVENT_KEY","JQUERY_NO_CONFLICT","fn","ClassName","BROWSE","CLEAR","HAS_VALUE","Event","CLICK","CHANGE","FileCls","element","input","find","control","placeholder","innerHTML","_checkElement","_checkInput","_checkControl","_setListeners","update","trigger","wrap","parent","on","e","stopPropagation","unwrap","value","replace","split","pop","text","pxUtil","_unsetListeners","removeData","hasClass","Error","preventDefault","constructor","_rejectEvent","browse","clear","proxy","off","method","each","data","_jQueryInterface","Constructor","noConflict","jQuery"],"mappings":"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","file":"plugins/px-file.js","sourcesContent":["\n\n\n// Plugins / PxFile\n// --------------------------------------------------\n\nconst PxFile = (function($) {\n  'use strict';\n\n  /**\n   * ------------------------------------------------------------------------\n   * Constants\n   * ------------------------------------------------------------------------\n   */\n\n  const NAME               = 'pxFile';\n  const DATA_KEY           = 'px.file';\n  const EVENT_KEY          = `.${DATA_KEY}`;\n  const JQUERY_NO_CONFLICT = $.fn[NAME];\n\n  const ClassName = {\n    BROWSE:    'px-file-browse',\n    CLEAR:     'px-file-clear',\n    HAS_VALUE: 'px-file-has-value',\n  };\n\n  const Event = {\n    CLICK:  `click${EVENT_KEY}`,\n    CHANGE: `change${EVENT_KEY}`,\n  };\n\n\n  /**\n   * ------------------------------------------------------------------------\n   * Class Definition\n   * ------------------------------------------------------------------------\n   */\n\n  class FileCls {\n    constructor(element) {\n      this.element    = element;\n      this.input      = $(element).find('.custom-file-input')[0];\n      this.control    = $(element).find('.custom-file-control')[0];\n      this.placeholder = this.control.innerHTML;\n\n      this._checkElement();\n      this._checkInput();\n      this._checkControl();\n      this._setListeners();\n\n      this.update();\n    }\n\n    // getters\n\n    static get NAME() {\n      return NAME;\n    }\n\n    static get DATA_KEY() {\n      return DATA_KEY;\n    }\n\n    static get Event() {\n      return Event;\n    }\n\n    static get EVENT_KEY() {\n      return EVENT_KEY;\n    }\n\n    // public\n\n    browse() {\n      $(this.input).trigger('click');\n    }\n\n    clear() {\n      $(this.input)\n        .wrap('<form>')\n        .parent()\n        .on('reset', function(e) { e.stopPropagation(); })\n        .trigger('reset');\n\n      $(this.input).unwrap();\n      this.update();\n    }\n\n    update() {\n      const value = (this.input.value || '')\n        .replace(/\\\\/g, '/')\n        .split('/')\n        .pop();\n\n      // Set control placeholder or value\n      if (value) {\n        $(this.control).text(value);\n      } else {\n        this.control.innerHTML = this.placeholder;\n      }\n\n      pxUtil[value ? 'addClass' : 'removeClass'](this.element, ClassName.HAS_VALUE);\n    }\n\n    destroy() {\n      this._unsetListeners();\n\n      $(this.element).removeData(DATA_KEY);\n    }\n\n    // private\n\n    _checkElement() {\n      if (!pxUtil.hasClass(this.element, 'custom-file')) {\n        throw new Error(`${NAME} plugin must be called on a custom file input wrapper.`);\n      }\n    }\n\n    _checkInput() {\n      if (!this.input) {\n        throw new Error('File input is not found.');\n      }\n    }\n\n    _checkControl() {\n      if (!this.control) {\n        throw new Error('.custom-file-control element is not found.');\n      }\n    }\n\n    _rejectEvent(e) {\n      if (!e) { return; }\n      e.stopPropagation();\n      e.preventDefault();\n    }\n\n    _setListeners() {\n      $(this.element)\n        .find(`.${ClassName.BROWSE}`)\n        .on(this.constructor.Event.CLICK, e => {\n          this._rejectEvent(e);\n          this.browse();\n          $(this.input).trigger('focus');\n        });\n\n      $(this.element)\n        .find(`.${ClassName.CLEAR}`)\n        .on(this.constructor.Event.CLICK, e => {\n          this._rejectEvent(e);\n          this.clear();\n          $(this.input).trigger('focus');\n        });\n\n      $(this.input)\n        .on(this.constructor.Event.CHANGE, $.proxy(this.update, this));\n    }\n\n    _unsetListeners() {\n      $(this.element).find(`.${ClassName.BROWSE}`).off(EVENT_KEY);\n      $(this.element).find(`.${ClassName.CLEAR}`).off(EVENT_KEY);\n      $(this.input).off(EVENT_KEY);\n    }\n\n    // static\n\n    static _jQueryInterface(method) {\n      return this.each(function() {\n        let data = $(this).data(DATA_KEY);\n\n        if (!data) {\n          data = new FileCls(this);\n          $(this).data(DATA_KEY, data);\n        }\n\n        if (typeof method === 'string') {\n          if (!data[method]) {\n            throw new Error(`No method named \"${method}\".`);\n          }\n          data[method]();\n        }\n      });\n    }\n  }\n\n\n  /**\n   * ------------------------------------------------------------------------\n   * jQuery\n   * ------------------------------------------------------------------------\n   */\n\n  $.fn[NAME]             = FileCls._jQueryInterface;\n  $.fn[NAME].Constructor = FileCls;\n  $.fn[NAME].noConflict  = function() {\n    $.fn[NAME] = JQUERY_NO_CONFLICT;\n    return FileCls._jQueryInterface;\n  };\n\n  return FileCls;\n})(jQuery);\n\n\n"],"sourceRoot":"../src/"}