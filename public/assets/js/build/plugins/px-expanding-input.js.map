{"version":3,"sources":["plugins/px-expanding-input.js"],"names":["PxExpandingInput","$","NAME","DATA_KEY","EVENT_KEY","JQUERY_NO_CONFLICT","fn","ClassName","EXPANDED","CONTROL","OVERLAY","CONTENT","Event","FOCUS","CLICK","EXPAND","COLLAPSE","COLLAPSED","ExpandingInput","element","control","find","overlay","_checkElements","_setListeners","pxUtil","hasClass","expandEvent","constructor","target","trigger","isDefaultPrevented","addClass","collapseEvent","removeClass","_unsetListeners","removeData","Error","insertAfter","on","proxy","expand","collapse","off","each","method","data","_jQueryInterface","Constructor","noConflict","jQuery"],"mappings":";;;;;;AAGA;AACA;;AAEA,IAAMA,mBAAoB,UAASC,CAAT,EAAY;AACpC;;AAEA;;;;;;AAMA,MAAMC,OAAqB,kBAA3B;AACA,MAAMC,WAAqB,oBAA3B;AACA,MAAMC,kBAAyBD,QAA/B;AACA,MAAME,qBAAqBJ,EAAEK,EAAF,CAAKJ,IAAL,CAA3B;;AAEA,MAAMK,YAAY;AAChBC,cAAU,UADM;AAEhBC,aAAU,yBAFM;AAGhBC,aAAU,yBAHM;AAIhBC,aAAU;AAJM,GAAlB;;AAOA,MAAMC,QAAQ;AACZC,qBAAmBT,SADP;AAEZU,qBAAmBV,SAFP;AAGZW,uBAAoBX,SAHR;AAIZI,2BAAsBJ,SAJV;AAKZY,2BAAsBZ,SALV;AAMZa,6BAAuBb;AANX,GAAd;;AAUA;;;;;;AA/BoC,MAqC9Bc,cArC8B;AAsClC,4BAAYC,OAAZ,EAAqB;AAAA;;AACnB,WAAKA,OAAL,GAAeA,OAAf;AACA,WAAKC,OAAL,GAAenB,EAAEkB,OAAF,EAAWE,IAAX,OAAoBd,UAAUE,OAA9B,EAAyC,CAAzC,CAAf;AACA,WAAKa,OAAL,GAAerB,EAAEkB,OAAF,EAAWE,IAAX,OAAoBd,UAAUG,OAA9B,EAAyC,CAAzC,CAAf;;AAEA,WAAKa,cAAL;AACA,WAAKC,aAAL;AACD;;AAGD;;AAhDkC;AAAA;;;AAmElC;;AAnEkC,+BAqEzB;AACP,YAAIC,OAAOC,QAAP,CAAgB,KAAKP,OAArB,EAA8BZ,UAAUC,QAAxC,CAAJ,EAAuD;AAAE;AAAS;;AAElE,YAAImB,cAAc1B,EAAEW,KAAF,CAAQ,KAAKgB,WAAL,CAAiBhB,KAAjB,CAAuBG,MAA/B,EAAuC;AACvDc,kBAAQ,KAAKV;AAD0C,SAAvC,CAAlB;;AAIA;AACAlB,UAAE,KAAKkB,OAAP,EAAgBW,OAAhB,CAAwBH,WAAxB;;AAEA,YAAIA,YAAYI,kBAAZ,EAAJ,EAAsC;AAAE;AAAS;;AAEjDN,eAAOO,QAAP,CAAgB,KAAKb,OAArB,EAA8BZ,UAAUC,QAAxC;;AAEA;AACAP,UAAE,KAAKkB,OAAP,EAAgBW,OAAhB,CACE7B,EAAEW,KAAF,CAAQ,KAAKgB,WAAL,CAAiBhB,KAAjB,CAAuBJ,QAA/B,EAAyC,EAAEqB,QAAQ,KAAKV,OAAf,EAAzC,CADF;;AAIA;AACAlB,UAAE,KAAKmB,OAAP,EAAgBU,OAAhB,CAAwB,OAAxB;AACD;AA1FiC;AAAA;AAAA,iCA4FvB;AACT,YAAI,CAACL,OAAOC,QAAP,CAAgB,KAAKP,OAArB,EAA8BZ,UAAUC,QAAxC,CAAL,EAAwD;AAAE;AAAS;;AAEnE,YAAIyB,gBAAgBhC,EAAEW,KAAF,CAAQ,KAAKgB,WAAL,CAAiBhB,KAAjB,CAAuBI,QAA/B,EAAyC;AAC3Da,kBAAQ,KAAKV;AAD8C,SAAzC,CAApB;;AAIA;AACAlB,UAAE,KAAKkB,OAAP,EAAgBW,OAAhB,CAAwBG,aAAxB;;AAEA,YAAIA,cAAcF,kBAAd,EAAJ,EAAwC;AAAE;AAAS;;AAEnDN,eAAOS,WAAP,CAAmB,KAAKf,OAAxB,EAAiCZ,UAAUC,QAA3C;;AAEA;AACAP,UAAE,KAAKkB,OAAP,EAAgBW,OAAhB,CACE7B,EAAEW,KAAF,CAAQ,KAAKgB,WAAL,CAAiBhB,KAAjB,CAAuBK,SAA/B,EAA0C,EAAEY,QAAQ,KAAKV,OAAf,EAA1C,CADF;AAGD;AA9GiC;AAAA;AAAA,gCAgHxB;AACR,aAAKgB,eAAL;;AAEAlC,UAAE,KAAKkB,OAAP,EAAgBiB,UAAhB,CAA2BjC,QAA3B;AACD;;AAED;;AAtHkC;AAAA;AAAA,uCAwHjB;AACf,YAAI,CAACsB,OAAOC,QAAP,CAAgB,KAAKP,OAArB,EAA8B,iBAA9B,CAAL,EAAuD;AACrD,gBAAM,IAAIkB,KAAJ,CAAanC,IAAb,0EAAN;AACD;;AAED,YAAI,CAAC,KAAKkB,OAAV,EAAmB;AACjB,gBAAM,IAAIiB,KAAJ,CAAU,qBAAV,CAAN;AACD;;AAED,YAAI,CAAC,KAAKf,OAAV,EAAmB;AACjB,eAAKA,OAAL,GAAerB,EAAE,6CAAF,EACVqC,WADU,CACE,KAAKlB,OADP,EACgB,CADhB,CAAf;AAED;;AAED,YAAI,CAACnB,EAAE,KAAKkB,OAAP,EAAgBE,IAAhB,OAAyBd,UAAUI,OAAnC,EAA8C,CAA9C,CAAL,EAAuD;AACrD,gBAAM,IAAI0B,KAAJ,CAAU,+BAAV,CAAN;AACD;AACF;AAzIiC;AAAA;AAAA,sCA2IlB;AACdpC,UAAE,KAAKmB,OAAP,EACGmB,EADH,CACM,KAAKX,WAAL,CAAiBhB,KAAjB,CAAuBC,KAD7B,EACoCZ,EAAEuC,KAAF,CAAQ,KAAKC,MAAb,EAAqB,IAArB,CADpC;;AAGAxC,UAAE,KAAKqB,OAAP,EACGiB,EADH,CACM,KAAKX,WAAL,CAAiBhB,KAAjB,CAAuBE,KAD7B,EACoCb,EAAEuC,KAAF,CAAQ,KAAKC,MAAb,EAAqB,IAArB,CADpC;;AAGA;AACAxC,UAAE,KAAKkB,OAAP,EAAgBE,IAAhB,CAAqB,wBAArB,EACGkB,EADH,CACM,KAAKX,WAAL,CAAiBhB,KAAjB,CAAuBE,KAD7B,EACoCb,EAAEuC,KAAF,CAAQ,KAAKE,QAAb,EAAuB,IAAvB,CADpC;AAED;AArJiC;AAAA;AAAA,wCAuJhB;AAChBzC,UAAE,KAAKmB,OAAP,EAAgBuB,GAAhB,CAAoBvC,SAApB;AACAH,UAAE,KAAKqB,OAAP,EAAgBqB,GAAhB,CAAoBvC,SAApB;AACAH,UAAE,KAAKkB,OAAP,EAAgBE,IAAhB,CAAqB,wBAArB,EAA+CsB,GAA/C,CAAmDvC,SAAnD;AACD;;AAED;;AA7JkC;AAAA;AAAA,yCA+JR;AACxB,eAAO,KAAKwC,IAAL,CAAU,UAASC,MAAT,EAAiB;AAChC,cAAIC,OAAO7C,EAAE,IAAF,EAAQ6C,IAAR,CAAa3C,QAAb,CAAX;;AAEA,cAAI,CAAC2C,IAAL,EAAW;AACTA,mBAAO,IAAI5B,cAAJ,CAAmB,IAAnB,CAAP;AACAjB,cAAE,IAAF,EAAQ6C,IAAR,CAAa3C,QAAb,EAAuB2C,IAAvB;AACD;;AAED,cAAI,OAAOD,MAAP,KAAkB,QAAtB,EAAgC;AAC9B,gBAAI,CAACC,KAAKD,MAAL,CAAL,EAAmB;AACjB,oBAAM,IAAIR,KAAJ,uBAA8BQ,MAA9B,QAAN;AACD;AACDC,iBAAKD,MAAL;AACD;AACF,SAdM,CAAP;AAeD;AA/KiC;AAAA;AAAA,0BAkDhB;AAChB,eAAO3C,IAAP;AACD;AApDiC;AAAA;AAAA,0BAsDZ;AACpB,eAAOC,QAAP;AACD;AAxDiC;AAAA;AAAA,0BA0Df;AACjB,eAAOS,KAAP;AACD;AA5DiC;AAAA;AAAA,0BA8DX;AACrB,eAAOR,SAAP;AACD;AAhEiC;;AAAA;AAAA;;AAoLpC;;;;;;AAMAH,IAAEK,EAAF,CAAKJ,IAAL,IAAyBgB,eAAe6B,gBAAxC;AACA9C,IAAEK,EAAF,CAAKJ,IAAL,EAAW8C,WAAX,GAAyB9B,cAAzB;AACAjB,IAAEK,EAAF,CAAKJ,IAAL,EAAW+C,UAAX,GAAyB,YAAW;AAClChD,MAAEK,EAAF,CAAKJ,IAAL,IAAaG,kBAAb;AACA,WAAOa,eAAe6B,gBAAtB;AACD,GAHD;;AAKA,SAAO7B,cAAP;AACD,CAlMwB,CAkMtBgC,MAlMsB,CAAzB","file":"plugins/px-expanding-input.js","sourcesContent":["\n\n\n// Plugins / PxExpandingInput\n// --------------------------------------------------\n\nconst PxExpandingInput = (function($) {\n  'use strict';\n\n  /**\n   * ------------------------------------------------------------------------\n   * Constants\n   * ------------------------------------------------------------------------\n   */\n\n  const NAME               = 'pxExpandingInput';\n  const DATA_KEY           = 'px.expanding-input';\n  const EVENT_KEY          = `.${DATA_KEY}`;\n  const JQUERY_NO_CONFLICT = $.fn[NAME];\n\n  const ClassName = {\n    EXPANDED: 'expanded',\n    CONTROL:  'expanding-input-control',\n    OVERLAY:  'expanding-input-overlay',\n    CONTENT:  'expanding-input-content',\n  };\n\n  const Event = {\n    FOCUS:     `focus${EVENT_KEY}`,\n    CLICK:     `click${EVENT_KEY}`,\n    EXPAND:    `expand${EVENT_KEY}`,\n    EXPANDED:  `expanded${EVENT_KEY}`,\n    COLLAPSE:  `collapse${EVENT_KEY}`,\n    COLLAPSED: `collapsed${EVENT_KEY}`,\n  };\n\n\n  /**\n   * ------------------------------------------------------------------------\n   * Class Definition\n   * ------------------------------------------------------------------------\n   */\n\n  class ExpandingInput {\n    constructor(element) {\n      this.element = element;\n      this.control = $(element).find(`.${ClassName.CONTROL}`)[0];\n      this.overlay = $(element).find(`.${ClassName.OVERLAY}`)[0];\n\n      this._checkElements();\n      this._setListeners();\n    }\n\n\n    // getters\n\n    static get NAME() {\n      return NAME;\n    }\n\n    static get DATA_KEY() {\n      return DATA_KEY;\n    }\n\n    static get Event() {\n      return Event;\n    }\n\n    static get EVENT_KEY() {\n      return EVENT_KEY;\n    }\n\n\n    // public\n\n    expand() {\n      if (pxUtil.hasClass(this.element, ClassName.EXPANDED)) { return; }\n\n      let expandEvent = $.Event(this.constructor.Event.EXPAND, {\n        target: this.element,\n      });\n\n      // Trigger before expand event\n      $(this.element).trigger(expandEvent);\n\n      if (expandEvent.isDefaultPrevented()) { return; }\n\n      pxUtil.addClass(this.element, ClassName.EXPANDED);\n\n      // Trigger after expand event\n      $(this.element).trigger(\n        $.Event(this.constructor.Event.EXPANDED, { target: this.element })\n      );\n\n      // Set focus on input\n      $(this.control).trigger('focus');\n    }\n\n    collapse() {\n      if (!pxUtil.hasClass(this.element, ClassName.EXPANDED)) { return; }\n\n      let collapseEvent = $.Event(this.constructor.Event.COLLAPSE, {\n        target: this.element,\n      });\n\n      // Trigger before collapse event\n      $(this.element).trigger(collapseEvent);\n\n      if (collapseEvent.isDefaultPrevented()) { return; }\n\n      pxUtil.removeClass(this.element, ClassName.EXPANDED);\n\n      // Trigger after collapse event\n      $(this.element).trigger(\n        $.Event(this.constructor.Event.COLLAPSED, { target: this.element })\n      );\n    }\n\n    destroy() {\n      this._unsetListeners();\n\n      $(this.element).removeData(DATA_KEY);\n    }\n\n    // private\n\n    _checkElements() {\n      if (!pxUtil.hasClass(this.element, 'expanding-input')) {\n        throw new Error(`${NAME} plugin must be called on an element with 'expanding-input' class.`);\n      }\n\n      if (!this.control) {\n        throw new Error('Input is not found.');\n      }\n\n      if (!this.overlay) {\n        this.overlay = $('<div class=\"expanding-input-overlay\"></div>')\n            .insertAfter(this.control)[0];\n      }\n\n      if (!$(this.element).find(`.${ClassName.CONTENT}`)[0]) {\n        throw new Error('Content element is not found.');\n      }\n    }\n\n    _setListeners() {\n      $(this.control)\n        .on(this.constructor.Event.FOCUS, $.proxy(this.expand, this));\n\n      $(this.overlay)\n        .on(this.constructor.Event.CLICK, $.proxy(this.expand, this));\n\n      // Set listeners on cancel buttons\n      $(this.element).find('[data-collapse=\"true\"]')\n        .on(this.constructor.Event.CLICK, $.proxy(this.collapse, this));\n    }\n\n    _unsetListeners() {\n      $(this.control).off(EVENT_KEY);\n      $(this.overlay).off(EVENT_KEY);\n      $(this.element).find('[data-collapse=\"true\"]').off(EVENT_KEY);\n    }\n\n    // static\n\n    static _jQueryInterface() {\n      return this.each(function(method) {\n        let data = $(this).data(DATA_KEY);\n\n        if (!data) {\n          data = new ExpandingInput(this);\n          $(this).data(DATA_KEY, data);\n        }\n\n        if (typeof method === 'string') {\n          if (!data[method]) {\n            throw new Error(`No method named \"${method}\".`);\n          }\n          data[method]();\n        }\n      });\n    }\n\n  }\n\n\n  /**\n   * ------------------------------------------------------------------------\n   * jQuery\n   * ------------------------------------------------------------------------\n   */\n\n  $.fn[NAME]             = ExpandingInput._jQueryInterface;\n  $.fn[NAME].Constructor = ExpandingInput;\n  $.fn[NAME].noConflict  = function() {\n    $.fn[NAME] = JQUERY_NO_CONFLICT;\n    return ExpandingInput._jQueryInterface;\n  };\n\n  return ExpandingInput;\n})(jQuery);\n\n\n"],"sourceRoot":"../src/"}