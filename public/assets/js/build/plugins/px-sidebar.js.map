{"version":3,"sources":["plugins/px-sidebar.js"],"names":["PxSidebar","$","NAME","DATA_KEY","EVENT_KEY","DATA_API_KEY","JQUERY_NO_CONFLICT","fn","Default","width","enableScrollbar","desktopMode","ClassName","NAVBAR_FIXED","LEFT","Event","RESIZE","SCROLL","CLICK_DATA_API","EXPAND","EXPANDED","COLLAPSE","COLLAPSED","Selector","DATA_TOGGLE","CONTENT","NAVBAR_HEADER","Sidebar","element","config","uniqueId","pxUtil","generateUniqueId","$content","find","parent","parentNode","_getConfig","_isRtl","attr","_setWidth","_setScrollbar","_checkMode","_setListeners","_triggerPreventableEvent","hasClass","toggleClass","_triggerEvent","$navbarHeader","length","height","_positioning","style","top","scrollTop","document","body","documentElement","perfectScrollbar","_unsetListeners","_unsetScrollbar","removeData","parseInt","pos","indexOf","window","PixelAdmin","getScreenSize","update","Error","eventKey","target","data","trigger","constructor","event","isDefaultPrevented","on","proxy","off","extend","each","_config","e","preventDefault","selector","getAttribute","_jQueryInterface","call","Constructor","noConflict","jQuery"],"mappings":"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","file":"plugins/px-sidebar.js","sourcesContent":["\n\n\n\n\n// Plugins / PxSidebar\n// --------------------------------------------------\n\nconst PxSidebar = (function($) {\n  'use strict';\n\n  /**\n   * ------------------------------------------------------------------------\n   * Constants\n   * ------------------------------------------------------------------------\n   */\n\n  const NAME               = 'pxSidebar';\n  const DATA_KEY           = 'px.sidebar';\n  const EVENT_KEY          = `.${DATA_KEY}`;\n  const DATA_API_KEY       = '.data-api';\n  const JQUERY_NO_CONFLICT = $.fn[NAME];\n\n  const Default = {\n    width:           null,\n    enableScrollbar: true,\n    desktopMode:     [ 'lg', 'xl' ],\n  };\n\n  const ClassName = {\n    NAVBAR_FIXED: 'px-navbar-fixed',\n    LEFT:         'px-sidebar-left',\n  };\n\n  const Event = {\n    RESIZE:         `resize${EVENT_KEY}`,\n    SCROLL:         `scroll${EVENT_KEY}`,\n    CLICK_DATA_API: `click${EVENT_KEY}${DATA_API_KEY}`,\n\n    EXPAND:         `expand${EVENT_KEY}`,\n    EXPANDED:       `expanded${EVENT_KEY}`,\n    COLLAPSE:       `collapse${EVENT_KEY}`,\n    COLLAPSED:      `collapsed${EVENT_KEY}`,\n  };\n\n  const Selector = {\n    DATA_TOGGLE:   '[data-toggle=\"sidebar\"]',\n    CONTENT:       '.px-sidebar-content',\n    NAVBAR_HEADER: '> .px-navbar .navbar-header',\n  };\n\n  /**\n   * ------------------------------------------------------------------------\n   * Class Definition\n   * ------------------------------------------------------------------------\n   */\n\n  class Sidebar {\n    constructor(element, config) {\n      this.uniqueId = pxUtil.generateUniqueId();\n\n      this.element       = element;\n      this.$content      = $(element).find(Selector.CONTENT);\n      this.parent        = element.parentNode;\n\n      this.config = this._getConfig(config);\n\n      this._isRtl = $('html').attr('dir') === 'rtl';\n\n      this._setWidth();\n      this._setScrollbar();\n      this._checkMode();\n\n      this._setListeners();\n    }\n\n\n    // getters\n\n    static get Default() {\n      return Default;\n    }\n\n    static get NAME() {\n      return NAME;\n    }\n\n    static get DATA_KEY() {\n      return DATA_KEY;\n    }\n\n    static get Event() {\n      return Event;\n    }\n\n    static get EVENT_KEY() {\n      return EVENT_KEY;\n    }\n\n\n    // public\n\n    toggle() {\n      if (!this._triggerPreventableEvent(pxUtil.hasClass(this.element, 'open') ? 'COLLAPSE' : 'EXPAND', this.element)) { return; }\n\n      pxUtil.toggleClass(this.element, 'open');\n\n      this._triggerEvent(pxUtil.hasClass(this.element, 'open') ? 'EXPANDED' : 'COLLAPSED', this.element);\n    }\n\n    update() {\n      const $navbarHeader = $(this.parent).find(Selector.NAVBAR_HEADER);\n\n      if ($navbarHeader.length) {\n        const height = $navbarHeader.height();\n\n        if (pxUtil.hasClass(this.parent, ClassName.NAVBAR_FIXED) || !this._positioning) {\n          this.element.style.top = `${height}px`;\n        } else {\n          const scrollTop =\n            this.parent === document.body ?\n              ((document.documentElement && document.documentElement.scrollTop) || document.body.scrollTop) :\n              this.parent.scrollTop;\n\n          this.element.style.top = scrollTop > height ?\n            '0px' :\n            `${height - scrollTop}px`;\n        }\n      }\n\n      if (this.config.enableScrollbar) {\n        this.$content.perfectScrollbar('update');\n      }\n    }\n\n    destroy() {\n      this._unsetListeners();\n      this._unsetScrollbar();\n      $(this.element).removeData(DATA_KEY);\n    }\n\n    // private\n\n    _setWidth() {\n      const width = parseInt(this.config.width || $(this.element).width(), 10);\n\n      let pos;\n\n      if (!this._isRtl) {\n        pos = pxUtil.hasClass(this.element, ClassName.LEFT) ? 'left' : 'right';\n      } else {\n        pos = pxUtil.hasClass(this.element, ClassName.LEFT) ? 'right' : 'left';\n      }\n\n      this.element.style.width = `${width}px`;\n      this.element.style[pos] = `-${width}px`;\n    }\n\n    _checkMode() {\n      this._positioning =\n        this.config.desktopMode.indexOf(window.PixelAdmin.getScreenSize()) !== -1;\n\n      this.update();\n    }\n\n    _setScrollbar() {\n      if (!this.config.enableScrollbar) { return; }\n\n      if (!this.$content.length) {\n        throw new Error('.px-sidebar-content element is not found.');\n      }\n\n      this.$content.perfectScrollbar();\n    }\n\n    _unsetScrollbar() {\n      if (!this.config.enableScrollbar || !this.$content.length) { return; }\n\n      this.$content.perfectScrollbar('destroy');\n    }\n\n    _triggerEvent(eventKey, target, data = {}) {\n      $(this.element).trigger(\n        $.Event(this.constructor.Event[eventKey], { target }),\n        [data]\n      );\n    }\n\n    _triggerPreventableEvent(eventKey, target, data = {}) {\n      const event = $.Event(this.constructor.Event[eventKey], { target });\n\n      $(this.element).trigger(event, [data]);\n\n      return !event.isDefaultPrevented();\n    }\n\n    _setListeners() {\n      $(window)\n        .on(`${this.constructor.Event.RESIZE}.${this.uniqueId}`, $.proxy(this._checkMode, this))\n        .on(`${this.constructor.Event.SCROLL}.${this.uniqueId}`, $.proxy(this.update, this));\n    }\n\n    _unsetListeners() {\n      $(window)\n        .off(`${this.constructor.Event.RESIZE}.${this.uniqueId}`)\n        .off(`${this.constructor.Event.SCROLL}.${this.uniqueId}`);\n    }\n\n    _getConfig(config) {\n      return $.extend({},\n        this.constructor.Default,\n        $(this.element).data(),\n        config\n      );\n    }\n\n    // static\n\n    static _jQueryInterface(config) {\n      return this.each(function() {\n        let data    = $(this).data(DATA_KEY);\n        let _config = typeof config === 'object' ? config : null;\n\n        if (!data) {\n          data = new Sidebar(this, _config);\n          $(this).data(DATA_KEY, data);\n        }\n\n        if (typeof config === 'string') {\n          if (!data[config]) {\n            throw new Error(`No method named \"${config}\"`);\n          }\n          data[config]();\n        }\n      });\n    }\n\n  }\n\n\n  /**\n   * ------------------------------------------------------------------------\n   * Data Api implementation\n   * ------------------------------------------------------------------------\n   */\n\n  $(document).on(Event.CLICK_DATA_API, Selector.DATA_TOGGLE, function(e) {\n    e.preventDefault();\n\n    const selector = this.getAttribute('data-target');\n    const target   = selector ? $(selector)[0] : null;\n\n    if (!target) { return; }\n\n    if (!$(target).data(DATA_KEY)) {\n      Sidebar._jQueryInterface.call($(target), $(this).data());\n    }\n\n    Sidebar._jQueryInterface.call($(target), 'toggle');\n  });\n\n\n  /**\n   * ------------------------------------------------------------------------\n   * jQuery\n   * ------------------------------------------------------------------------\n   */\n\n  $.fn[NAME]             = Sidebar._jQueryInterface;\n  $.fn[NAME].Constructor = Sidebar;\n  $.fn[NAME].noConflict  = function() {\n    $.fn[NAME] = JQUERY_NO_CONFLICT;\n    return Sidebar._jQueryInterface;\n  };\n\n  return Sidebar;\n})(jQuery);\n\n\n"],"sourceRoot":"../src/"}