{"version":3,"sources":["plugins/px-char-limit.js"],"names":["PxCharLimit","$","NAME","DATA_KEY","EVENT_KEY","JQUERY_NO_CONFLICT","fn","Default","maxlength","counter","Event","KEYUP","FOCUS","CharLimit","element","config","isTextarea","is","_getConfig","_getLabel","_setMaxLength","_setListeners","update","value","charCount","replace","length","substr","innerHTML","_unsetListeners","removeData","setAttribute","removeAttribute","on","constructor","proxy","off","result","extend","getAttribute","data","Error","each","_config","_jQueryInterface","Constructor","noConflict","jQuery"],"mappings":"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","file":"plugins/px-char-limit.js","sourcesContent":["\n\n// Plugins / PxCharLimit\n// --------------------------------------------------\n\nconst PxCharLimit = (function($) {\n  'use strict';\n\n  /**\n   * ------------------------------------------------------------------------\n   * Constants\n   * ------------------------------------------------------------------------\n   */\n\n  const NAME               = 'pxCharLimit';\n  const DATA_KEY           = 'px.charLimit';\n  const EVENT_KEY          = `.${DATA_KEY}`;\n  const JQUERY_NO_CONFLICT = $.fn[NAME];\n\n\n  const Default = {\n    maxlength: null,\n    counter:   '',\n  };\n\n  const Event = {\n    KEYUP: `keyup${EVENT_KEY}`,\n    FOCUS: `focus${EVENT_KEY}`,\n  };\n\n\n  /**\n   * ------------------------------------------------------------------------\n   * Class Definition\n   * ------------------------------------------------------------------------\n   */\n\n  class CharLimit {\n    constructor(element, config) {\n      this.element    = element;\n      this.isTextarea = $(element).is('textarea');\n      this.config     = this._getConfig(config);\n      this.counter      = this._getLabel();\n\n      this._setMaxLength();\n      this._setListeners();\n\n      this.update();\n    }\n\n\n    // getters\n\n    static get Default() {\n      return Default;\n    }\n\n    static get NAME() {\n      return NAME;\n    }\n\n    static get DATA_KEY() {\n      return DATA_KEY;\n    }\n\n    static get Event() {\n      return Event;\n    }\n\n    static get EVENT_KEY() {\n      return EVENT_KEY;\n    }\n\n\n    // public\n\n    update() {\n      const maxlength = this.config.maxlength;\n      let value       = this.element.value;\n      let charCount;\n\n      if (this.isTextarea) {\n        value = value.replace(/\\r?\\n/g, '\\n');\n      }\n\n      charCount = value.length;\n\n      if (charCount > maxlength) {\n        this.element.value = value.substr(0, maxlength);\n        charCount = maxlength;\n      }\n\n      if (this.counter) {\n        this.counter.innerHTML = maxlength - charCount;\n      }\n    }\n\n    destroy() {\n      this._unsetListeners();\n\n      $(this.element).removeData(DATA_KEY);\n    }\n\n\n    // private\n\n    _getLabel() {\n      if (!this.config.counter) { return null; }\n\n      return typeof this.config.counter === 'string' ?\n        ($(this.config.counter)[0] || null) :\n        this.config.counter;\n    }\n\n    _setMaxLength() {\n      if (!this.isTextarea) {\n        this.element.setAttribute('maxlength', this.config.maxlength);\n      } else {\n        this.element.removeAttribute('maxlength');\n      }\n    }\n\n    _setListeners() {\n      $(this.element)\n        .on(this.constructor.Event.KEYUP, $.proxy(this.update, this))\n        .on(this.constructor.Event.FOCUS, $.proxy(this.update, this));\n    }\n\n    _unsetListeners() {\n      $(this.element).off(EVENT_KEY);\n    }\n\n    _getConfig(config) {\n      const result = $.extend({},\n        this.constructor.Default,\n        { maxlength: this.element.getAttribute('maxlength') },\n        $(this.element).data(),\n        config\n      );\n\n      if (!result.maxlength) {\n        throw new Error('maxlength is not specified.');\n      }\n\n      // Remove maxlength attribute if the element is a textarea\n      if (this.isTextarea && this.element.getAttribute('maxlength')) {\n        this.element.removeAttribute('maxlength');\n      }\n\n      return result;\n    }\n\n\n    // static\n\n    static _jQueryInterface(config) {\n      return this.each(function() {\n        let data    = $(this).data(DATA_KEY);\n        let _config = typeof config === 'object' ? config : null;\n\n        if (!data) {\n          data = new CharLimit(this, _config);\n          $(this).data(DATA_KEY, data);\n        }\n\n        if (typeof config === 'string') {\n          if (!data[config]) {\n            throw new Error(`No method named \"${config}\"`);\n          }\n          data[config]();\n        }\n      });\n    }\n\n  }\n\n\n  /**\n   * ------------------------------------------------------------------------\n   * jQuery\n   * ------------------------------------------------------------------------\n   */\n\n  $.fn[NAME]             = CharLimit._jQueryInterface;\n  $.fn[NAME].Constructor = CharLimit;\n  $.fn[NAME].noConflict  = function() {\n    $.fn[NAME] = JQUERY_NO_CONFLICT;\n    return CharLimit._jQueryInterface;\n  };\n\n  return CharLimit;\n})(jQuery);\n\n\n"],"sourceRoot":"../src/"}